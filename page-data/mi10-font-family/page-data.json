{"componentChunkName":"component---src-templates-blog-post-js","path":"/mi10-font-family/","result":{"data":{"site":{"siteMetadata":{"title":"兼容大全"}},"markdownRemark":{"id":"bd159faa-55c6-5543-bc1c-cf25a0d78a53","excerpt":"现象及复现条件 在 miui 11 的设备中，一个普通的自适应内容宽度 Text 元素在实际展示中可能出现尾部字符被截断的情况，多出现在内容为 数值或者英文的情况。 条件 值 miui 10 react-native 0.59.0 背景知识 React-Native…","html":"<h2>现象及复现条件</h2>\n<p>在 miui 11 的设备中，一个普通的自适应内容宽度 Text 元素在实际展示中<strong>可能</strong>出现尾部字符被截断的情况，多出现在内容为 <strong>数值</strong>或者<strong>英文</strong>的情况。</p>\n<table>\n<thead>\n<tr>\n<th>条件</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>miui</td>\n<td>10</td>\n</tr>\n<tr>\n<td>react-native</td>\n<td>0.59.0</td>\n</tr>\n</tbody>\n</table>\n<h2>背景知识</h2>\n<p>React-Native 中的 <code class=\"language-text\">Text</code> 组件，如果没有显示的声明 <code class=\"language-text\">fontFamily</code> 样式属性，则会使用系统预设的字体，而通常情况下，我们考虑到让我们的应用在不同的终端下使用各自最优的显示方式，我们通常不会显示的去声明这个值。另外一个不声明 <code class=\"language-text\">fontFamily</code> 的原因就是 React-Native 中的 <code class=\"language-text\">fontFamily</code> 不支持 CSS 的声明多种字体的，我们没法声明一个同时在 iOS 和 android 中同时存在的字体。</p>\n<h2>解决方案</h2>\n<p>通过 <code class=\"language-text\">Platform.select</code> 设置安卓下全局 Text 组件的 <code class=\"language-text\">fontFamily</code> 值为 <code class=\"language-text\">\"\"</code>，ios 下不设置 <code class=\"language-text\">fontFamily</code> 值。</p>\n<p>ios 中不允许设置 <code class=\"language-text\">fontFamily</code> 为不存在的字体，所以 ios 下不要设置 <code class=\"language-text\">fontFamily</code> 的值。</p>\n<p>android 中允许将 <code class=\"language-text\">fontFamily</code> 的值设置为任何值，当<code class=\"language-text\">fontFamily</code> 设置的字体不在设备中时，理论上是会执行降级操作的，使用默认的字体，所以仍能保证应用在各设备中仍优先使用系统预设字体，应用不会出现大的改动。但是此时在 miui 11 中，被截断的现象消失了（<em>原因不详！猜测应该是降级规则有问题？</em>）。</p>","frontmatter":{"title":"小米10内置字体在 React-Native 下被截断","date":"08-05, 2021","description":null}},"previous":null,"next":{"fields":{"slug":"/user-select_effect_input_in_webkit/"},"frontmatter":{"title":"小米10内置字体在 React-Native 下被截断"}}},"pageContext":{"id":"bd159faa-55c6-5543-bc1c-cf25a0d78a53","previousPostId":null,"nextPostId":"7479d80d-24ca-507e-97e1-c3a62a786a41"}},"staticQueryHashes":["2841359383"]}