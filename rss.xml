<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[兼容大全]]></title><description><![CDATA[记录作者所需要到的各种兼容性问题]]></description><link>https://dingziqi.github.io/compatible-issues</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 11 Aug 2021 09:58:52 GMT</lastBuildDate><item><title><![CDATA[小米10内置字体在 React-Native 下被截断]]></title><description><![CDATA[现象及复现条件 在移动端的页面中，我们常常会通过设置  来禁用用户复制行为，避免由 touch 行为带来的误触，但是该属性在  内核下会导致部分元素出现异常行为，如果  会无法输入，但是可以聚焦。可以在 Safari 下测试该代码： 解决方案 目前 （2021-08-1…]]></description><link>https://dingziqi.github.io/compatible-issues/user-select_effect_input_in_webkit/</link><guid isPermaLink="false">https://dingziqi.github.io/compatible-issues/user-select_effect_input_in_webkit/</guid><pubDate>Wed, 11 Aug 2021 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;现象及复现条件&lt;/h2&gt;
&lt;p&gt;在移动端的页面中，我们常常会通过设置 &lt;code class=&quot;language-text&quot;&gt;user-select: none&lt;/code&gt; 来禁用用户复制行为，避免由 touch 行为带来的误触，但是该属性在 &lt;code class=&quot;language-text&quot;&gt;webkit&lt;/code&gt; 内核下会导致部分元素出现异常行为，如果 &lt;code class=&quot;language-text&quot;&gt;input&lt;/code&gt; 会无法输入，但是可以聚焦。可以在 Safari 下测试该代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style&quot;&gt;&lt;span class=&quot;token language-css&quot;&gt;
&lt;span class=&quot;token selector&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;-webkit-user-select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; // 这句声明才会导致 webkit 出错
  &lt;span class=&quot;token property&quot;&gt;-khtml-user-select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;-moz-user-select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;-o-user-select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;user-select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;解决方案&lt;/h2&gt;
&lt;p&gt;目前 （2021-08-11）官方还未修复该问题，可以通过避开为 &lt;code class=&quot;language-text&quot;&gt;input&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;textarea&lt;/code&gt; 设置 &lt;code class=&quot;language-text&quot;&gt;-webkit-user-select: none&lt;/code&gt; 来规避这个问题。&lt;/p&gt;
&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;webkit bug地址：&lt;a href=&quot;https://bugs.webkit.org/show_bug.cgi?id=82692&quot;&gt;https://bugs.webkit.org/show_bug.cgi?id=82692&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[小米10内置字体在 React-Native 下被截断]]></title><description><![CDATA[现象及复现条件 在 miui 11 的设备中，一个普通的自适应内容宽度 Text 元素在实际展示中可能出现尾部字符被截断的情况，多出现在内容为 数值或者英文的情况。 条件 值 miui 10 react-native 0.59.0 背景知识 React-Native…]]></description><link>https://dingziqi.github.io/compatible-issues/mi10-font-family/</link><guid isPermaLink="false">https://dingziqi.github.io/compatible-issues/mi10-font-family/</guid><pubDate>Thu, 05 Aug 2021 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;现象及复现条件&lt;/h2&gt;
&lt;p&gt;在 miui 11 的设备中，一个普通的自适应内容宽度 Text 元素在实际展示中&lt;strong&gt;可能&lt;/strong&gt;出现尾部字符被截断的情况，多出现在内容为 &lt;strong&gt;数值&lt;/strong&gt;或者&lt;strong&gt;英文&lt;/strong&gt;的情况。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;条件&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;miui&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;react-native&lt;/td&gt;
&lt;td&gt;0.59.0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;背景知识&lt;/h2&gt;
&lt;p&gt;React-Native 中的 &lt;code class=&quot;language-text&quot;&gt;Text&lt;/code&gt; 组件，如果没有显示的声明 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 样式属性，则会使用系统预设的字体，而通常情况下，我们考虑到让我们的应用在不同的终端下使用各自最优的显示方式，我们通常不会显示的去声明这个值。另外一个不声明 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 的原因就是 React-Native 中的 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 不支持 CSS 的声明多种字体的，我们没法声明一个同时在 iOS 和 android 中同时存在的字体。&lt;/p&gt;
&lt;h2&gt;解决方案&lt;/h2&gt;
&lt;p&gt;通过 &lt;code class=&quot;language-text&quot;&gt;Platform.select&lt;/code&gt; 设置安卓下全局 Text 组件的 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 值为 &lt;code class=&quot;language-text&quot;&gt;&quot;&quot;&lt;/code&gt;，ios 下不设置 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 值。&lt;/p&gt;
&lt;p&gt;ios 中不允许设置 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 为不存在的字体，所以 ios 下不要设置 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 的值。&lt;/p&gt;
&lt;p&gt;android 中允许将 &lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 的值设置为任何值，当&lt;code class=&quot;language-text&quot;&gt;fontFamily&lt;/code&gt; 设置的字体不在设备中时，理论上是会执行降级操作的，使用默认的字体，所以仍能保证应用在各设备中仍优先使用系统预设字体，应用不会出现大的改动。但是此时在 miui 11 中，被截断的现象消失了（&lt;em&gt;原因不详！猜测应该是降级规则有问题？&lt;/em&gt;）。&lt;/p&gt;</content:encoded></item></channel></rss>